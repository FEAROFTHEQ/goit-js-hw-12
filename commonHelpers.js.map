{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const fetchImages = async (key, tagWord, page, perPage) =>{\n  try {\n    const response = await \n  axios.get(`https://pixabay.com/api/`, {\n    params: {\n        key: key,\n        q: tagWord,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: perPage\n    }\n});\n   return response.data;\n  }\n  catch(error){\n  console.log(error);\n  throw error;\n  }\n  };\n\n\n\n","export const renderImages = (images, container)=>{\n    const markup =\n    images.map(image=>\n        `\n        <li class=\"item\">\n  <a class=\"link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n  <div class=\"desc-container\">\n  <p class=\"descr\"><span class=\"descr-text\">Likes </span>${image.likes}</p>\n  <p class=\"descr\"><span class=\"descr-text\">Views </span>${image.views}</p>\n  <p class=\"descr\"><span class=\"descr-text\">Comments </span>${image.comments}</p>\n  <p class=\"descr\"><span class=\"descr-text\">Downloads </span>${image.downloads}</p>\n  </div>\n       </li>\n        `\n    ).join(\"\");\n\n\ncontainer.insertAdjacentHTML(\"beforeend\", markup);\n\n}\n\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\n\nconst key = \"44686774-01236c387d1eefb9bce1c8eeb\";\nconst form = document.querySelector('.form');\nconst input = document.querySelector(\".search-input\");\nconst container = document.querySelector(\".images-container\");\nconst loader = document.querySelector(\".loader\");\nconst btnLoadMore= document.querySelector(\".btn-load-more\");\nconst lightbox = new SimpleLightbox('.images-container a', {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250\n});\nlet page = 1;\nlet perPage = 15;\nlet images =[];\nlet tagWord;\nlet maxPages;\nlet heightOfImage;\n\nform.addEventListener(\"submit\", searchImages);\nbtnLoadMore.addEventListener(\"click\", loadMore)\n\nasync function searchImages(event){\n   event.preventDefault();\n   tagWord = getTagWord();\n   images = [];\n   page = 1;\n   btnLoadMore.style.display = 'none';\n   if(tagWord){\n    container.innerHTML = '';\n    showLoader();\n    try{\n        const data = await fetchImages(key, tagWord, page, perPage);\n        images = data.hits;\n        maxPages = Math.ceil(data.totalHits / perPage);\n        hideLoader();\n        if (images.length === 0){\n            container.innerHTML = '';\n            iziToast.error({\n                title: 'No images',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position:'center',\n            });\n            return;\n    }\n    container.innerHTML = '';\n    renderImages(images, container);\n    page+=1;\n    lightbox.refresh();\n    const imageLi = document.querySelector(\".item\");\n    heightOfImage = imageLi.getBoundingClientRect().height;\n    if (page > maxPages){\n        return;\n    }\n    if (page > 1) {\n        btnLoadMore.style.display = 'block';\n      }\n}\n    catch(error) {\n        hideLoader();\n        console.log(error);\n        iziToast.error({\n            title: 'Error!',\n            message: 'Failed to fetch images',\n            position: 'center',\n        });\n    };\n   }\n}\n\nasync function loadMore(event){\n    event.preventDefault();\n    showLoader();\n    try{\n        const data = await fetchImages(key, tagWord, page, perPage);\n        images = data.hits;\n        hideLoader();\n        if (page > maxPages) {\n            hideLoader();\n            iziToast.info({\n              message: \"We're sorry, but you've reached the end of search results.\",\n              position: 'center',\n            });\n            btnLoadMore.style.display = 'none';\n            return;\n          }\n    page+=1;\n    renderImages(images, container);\n    smoothScroll(heightOfImage * 2);\n    lightbox.refresh();\n}\n    catch(error) {\n        hideLoader();\n        iziToast.error({\n            title: 'Error!',\n            message: 'Failed to fetch images',\n            position: 'center',\n        });\n    };\n   }\n\nfunction getTagWord(){\n    const tagWord = input.value;\n    if(tagWord.trim() === \"\"){\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter word',\n            position: 'center'\n        });\n        return null;};\n\n    return tagWord;\n       \n}\n\nfunction showLoader() {\n    loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\n\nfunction smoothScroll(height) {\n    window.scrollBy({\n      top: height,\n      behavior: 'smooth'\n    });\n  }\n\n\n"],"names":["fetchImages","key","tagWord","page","perPage","axios","error","renderImages","images","container","markup","image","form","input","loader","btnLoadMore","lightbox","SimpleLightbox","maxPages","heightOfImage","searchImages","loadMore","event","getTagWord","showLoader","data","hideLoader","iziToast","smoothScroll","height"],"mappings":"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"}