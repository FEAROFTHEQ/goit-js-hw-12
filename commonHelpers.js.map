{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport const fetchImages = async (key, tagWord, page, perPage) =>{\r\n  try {\r\n    const response = await \r\n  axios.get(`https://pixabay.com/api/`, {\r\n    params: {\r\n        key: key,\r\n        q: tagWord,\r\n        image_type: 'photo',\r\n        orientation: 'horizontal',\r\n        safesearch: 'true',\r\n        page: page,\r\n        per_page: perPage\r\n    }\r\n});\r\n   return response.data;\r\n  }\r\n  catch(error){\r\n  console.log(error);\r\n  throw error;\r\n  }\r\n  };\r\n\r\n\r\n\r\n","export const renderImages = (images, container)=>{\r\n    const markup =\r\n    images.map(image=>\r\n        `\r\n        <li class=\"item\">\r\n  <a class=\"link\" href=\"${image.largeImageURL}\">\r\n    <img\r\n      class=\"image\"\r\n      src=\"${image.webformatURL}\"\r\n      alt=\"${image.tags}\"\r\n    />\r\n  </a>\r\n  <div class=\"desc-container\">\r\n  <p class=\"descr\"><span class=\"descr-text\">Likes </span>${image.likes}</p>\r\n  <p class=\"descr\"><span class=\"descr-text\">Views </span>${image.views}</p>\r\n  <p class=\"descr\"><span class=\"descr-text\">Comments </span>${image.comments}</p>\r\n  <p class=\"descr\"><span class=\"descr-text\">Downloads </span>${image.downloads}</p>\r\n  </div>\r\n       </li>\r\n        `\r\n    ).join(\"\");\r\n\r\n\r\ncontainer.insertAdjacentHTML(\"beforeend\", markup);\r\n\r\n}\r\n\r\n\r\n","import iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\nimport SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\nimport { fetchImages } from './js/pixabay-api.js';\r\nimport { renderImages } from './js/render-functions.js';\r\n\r\nconst key = \"44686774-01236c387d1eefb9bce1c8eeb\";\r\nconst form = document.querySelector('.form');\r\nconst input = document.querySelector(\".search-input\");\r\nconst container = document.querySelector(\".images-container\");\r\nconst loader = document.querySelector(\".loader\");\r\nconst btnLoadMore= document.querySelector(\".btn-load-more\");\r\nconst lightbox = new SimpleLightbox('.images-container a', {\r\n    captions: true,\r\n    captionsData: 'alt',\r\n    captionPosition: 'bottom',\r\n    captionDelay: 250\r\n});\r\nlet page = 1;\r\nlet perPage = 15;\r\nlet images =[];\r\nlet tagWord;\r\nlet maxPages;\r\nlet heightOfImage;\r\n\r\nform.addEventListener(\"submit\", searchImages);\r\nbtnLoadMore.addEventListener(\"click\", loadMore)\r\n\r\nasync function searchImages(event){\r\n   event.preventDefault();\r\n   tagWord = getTagWord();\r\n   images = [];\r\n   page = 1;\r\n   btnLoadMore.style.display = 'none';\r\n   if(tagWord){\r\n    container.innerHTML = '';\r\n    showLoader();\r\n    try{\r\n        const data = await fetchImages(key, tagWord, page, perPage);\r\n        images = data.hits;\r\n        maxPages = Math.ceil(data.totalHits / perPage);\r\n        hideLoader();\r\n        if (images.length === 0){\r\n            container.innerHTML = '';\r\n            iziToast.error({\r\n                title: 'No images',\r\n                message: 'Sorry, there are no images matching your search query. Please try again!',\r\n                position:'center',\r\n            });\r\n            return;\r\n    }\r\n    container.innerHTML = '';\r\n    renderImages(images, container);\r\n    page+=1;\r\n    lightbox.refresh();\r\n    const imageLi = document.querySelector(\".item\");\r\n    heightOfImage = imageLi.getBoundingClientRect().height;\r\n    if (page > maxPages){\r\n        return;\r\n    }\r\n    if (page > 1) {\r\n        btnLoadMore.style.display = 'block';\r\n      }\r\n}\r\n    catch(error) {\r\n        hideLoader();\r\n        console.log(error);\r\n        iziToast.error({\r\n            title: 'Error!',\r\n            message: 'Failed to fetch images',\r\n            position: 'center',\r\n        });\r\n    };\r\n   }\r\n}\r\n\r\nasync function loadMore(event){\r\n    event.preventDefault();\r\n    showLoader();\r\n    try{\r\n        const data = await fetchImages(key, tagWord, page, perPage);\r\n        images = data.hits;\r\n        hideLoader();\r\n        if (page > maxPages) {\r\n            hideLoader();\r\n            iziToast.info({\r\n              message: \"We're sorry, but you've reached the end of search results.\",\r\n              position: 'center',\r\n            });\r\n            btnLoadMore.style.display = 'none';\r\n            return;\r\n          }\r\n    page+=1;\r\n    renderImages(images, container);\r\n    smoothScroll(heightOfImage * 2);\r\n    lightbox.refresh();\r\n}\r\n    catch(error) {\r\n        hideLoader();\r\n        iziToast.error({\r\n            title: 'Error!',\r\n            message: 'Failed to fetch images',\r\n            position: 'center',\r\n        });\r\n    };\r\n   }\r\n\r\nfunction getTagWord(){\r\n    const tagWord = input.value;\r\n    if(tagWord.trim() === \"\"){\r\n        iziToast.error({\r\n            title: 'Error',\r\n            message: 'Please enter word',\r\n            position: 'center'\r\n        });\r\n        return null;};\r\n\r\n    return tagWord;\r\n       \r\n}\r\n\r\nfunction showLoader() {\r\n    loader.style.display = 'block';\r\n}\r\n\r\nfunction hideLoader() {\r\n    loader.style.display = 'none';\r\n}\r\n\r\nfunction smoothScroll(height) {\r\n    window.scrollBy({\r\n      top: height,\r\n      behavior: 'smooth'\r\n    });\r\n  }\r\n\r\n\r\n"],"names":["fetchImages","key","tagWord","page","perPage","axios","error","renderImages","images","container","markup","image","form","input","loader","btnLoadMore","lightbox","SimpleLightbox","maxPages","heightOfImage","searchImages","loadMore","event","getTagWord","showLoader","data","hideLoader","iziToast","smoothScroll","height"],"mappings":"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"}